<section class="main">
  <svg class="waves" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1440 320">
    <path
      fill="#00195c"
      d="M0,96L60,117.3C120,139,240,181,360,197.3C480,213,600,203,720,176C840,149,960,107,1080,122.7C1200,139,1320,213,1380,250.7L1440,288L1440,0L1380,0C1320,0,1200,0,1080,0C960,0,840,0,720,0C600,0,480,0,360,0C240,0,120,0,60,0L0,0Z"
    ></path>
    <path
      class="w1"
      d="M0,320L60,293.3C120,267,240,213,360,197.3C480,181,600,203,720,224C840,245,960,267,1080,266.7C1200,267,1320,245,1380,234.7L1440,224L1440,0L1380,0C1320,0,1200,0,1080,0C960,0,840,0,720,0C600,0,480,0,360,0C240,0,120,0,60,0L0,0Z"
    ></path>
  </svg>

  <div class="container h-100">
    <div class="row h-100">
      <div
        class="col-12 d-flex align-items-center justify-content-center flex-column"
      >
        <img class="mb-2" src="assets/img/logo.png" alt="logo" />
        <p class="h4" style="color: white;">La mejor forma de mercar</p>
      </div>
    </div>
  </div>
</section>

<main class="h-25 container__auth">
  <div class="container h-100">
    <div class="row h-100" *ngIf="!showLogin">
      <div
        class="col-12 h-100 d-flex align-items-center justify-content-center flex-column"
      >
        <button
          mat-raised-button
          class="button__login primary p-1 mb-4 rounded"
          (click)="showFormLogin()"
        >
          Iniciar sesión
        </button>
        <button
          mat-raised-button
          class="button__login second p-1 mb-4 rounded"
          (click)="showFormRegister()"
        >
          Registrate
        </button>
        <p class="text-muted">¿Te ayudamos?</p>
      </div>
    </div>
    <div
      class="row h-100 justify-content-center align-items-center"
      *ngIf="showLogin"
    >
      <div class="col-md-6 col-lg-6 ml-auto mr-auto">
        <mat-card class="rounded mat-elevation-z8">
          <div class="row" *ngIf="login">
            <div class="col-12">
              <h1 class="text-center mb-0 font-28">Bienvenido</h1>
              <p
                class="text-center mt-0 font-weight-bold font-14 color-highlight"
              >
                Vamos a iniciar sesión!
              </p>
            </div>
          </div>
          <div class="row" *ngIf="!login">
            <div class="col-12">
              <h1 class="text-center mb-0 font-28">Bienvenido</h1>
              <p
                class="text-center mt-0 font-weight-bold font-14 color-highlight"
              >
                No esperes más, crea una cuenta ahora!
              </p>
            </div>
          </div>

          <mat-card-content>
            <div
              class="alert alert-success"
              role="alert"
              *ngIf="registerSuccess"
            >
              Registro exitoso!.
              <a (click)="registerChange()" class="alert-link"
                >Inicia sesión aquí!</a
              >
            </div>
            <div class="alert alert-success" role="alert" *ngIf="loginSuccess">
              Genia! serás redirigido en unos segundos.
            </div>
            <div
              class="alert alert-danger"
              role="alert"
              *ngIf="errors.length != 0"
            >
              <p *ngFor="let error of errors">
                <strong>- {{ error }} </strong>
              </p>
            </div>
            <app-login (sendUser)="loginApi($event)" *ngIf="login"></app-login>
            <app-register
              (sendUser)="registerUser($event)"
              *ngIf="!login"
            ></app-register>
          </mat-card-content>
          <mat-card-actions class="text-center">
            <div class="row">
              <div class="col-12 col-lg-6" *ngIf="!login">
                <button
                  mat-button
                  class="font-blue-dark btn-block"
                  (click)="login = true"
                >
                  ¿Ya estás registrado?
                </button>
              </div>
              <div class="col-12 col-lg-6" *ngIf="login">
                <button
                  mat-button
                  class="font-blue-dark btn-block"
                  (click)="login = false"
                >
                  Crea una cuenta!
                </button>
              </div>
              <div class="col-12 col-lg-6">
                <button mat-button class="font-blue-dark btn-block">
                  ¿Se te olvidó tu contraseña?
                </button>
              </div>
            </div>
          </mat-card-actions>
        </mat-card>
      </div>
    </div>
  </div>
</main>

<div class="container-fluid">
  <ngx-spinner
    bdColor="rgba(0,25,92,0.8)"
    color="#fff"
    type="ball-clip-rotate-multiple"
  >
    <p class="loading">Cargando...</p>
  </ngx-spinner>
</div>
